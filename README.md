# 异常流量监控系统 (Traffic Anomaly Detection System)

企业级网络安全监控平台，提供实时流量分析、异常检测和安全预警功能。

## 系统特性

### 核心功能
- **实时流量监控** - 24/7 持续监控网络流量，支持多种协议分析
- **智能异常检测** - 基于机器学习的异常流量识别和威胁检测
- **多级告警系统** - 可配置的告警规则和自动化响应机制
- **权限管理** - 基于角色的访问控制，支持多用户协作
- **完整审计** - 详细的操作日志和审计追踪

### 技术架构
- **前端**: React + TypeScript + Tailwind CSS
- **后端**: Node.js + Express.js
- **数据库**: PostgreSQL + Drizzle ORM
- **认证**: 基于会话的身份验证
- **实时通信**: WebSocket 支持

## 快速开始

### 环境要求
- Node.js 18+ 
- PostgreSQL 数据库
- 现代浏览器支持

### 安装步骤

1. **克隆项目**
```bash
git clone <repository-url>
cd traffic-anomaly-detection
```

2. **安装依赖**
```bash
npm install
```

3. **配置环境变量**
```bash
# 数据库连接
DATABASE_URL=postgresql://username:password@localhost:5432/database_name

# 会话密钥
SESSION_SECRET=your-secure-session-secret

# 其他配置
PGHOST=localhost
PGPORT=5432
PGUSER=username
PGPASSWORD=password
PGDATABASE=database_name
```

4. **初始化数据库**
```bash
npm run db:push
```

5. **启动应用**
```bash
npm run dev
```

应用将在 `http://localhost:5000` 启动。

## 用户角色与权限

### 管理员 (Admin)
- 完整系统访问权限
- 用户管理和权限分配
- 系统配置和规则管理
- 所有数据的查看和操作权限

### 运维人员 (Operator)
- 告警管理和处理
- 流量分析和监控
- 检测规则配置
- 设备管理

### 只读用户 (Readonly)
- 仪表板查看
- 流量数据浏览
- 告警状态查看
- 报告生成

## 功能模块

### 仪表板
- **实时流量统计** - 展示当前网络流量的实时数据和变化趋势，支持多时间段查看
- **告警概览** - 汇总显示系统中所有告警事件的状态分布和紧急程度统计
- **系统状态监控** - 监控系统运行状态、服务健康度和资源使用情况
- **关键指标展示** - 可视化展示网络安全的核心KPI指标和性能数据

### 用户管理
- **用户账户创建和编辑** - 支持新用户注册、个人信息修改和密码重置功能
- **角色权限分配** - 基于RBAC模型分配用户角色，控制功能模块访问权限
- **账户状态管理** - 管理用户账户的激活、禁用和锁定状态，保障系统安全
- **批量操作支持** - 提供用户信息批量导入导出和批量权限设置功能

### 告警管理
- **告警事件列表** - 展示所有安全告警的详细信息，支持多维度筛选和排序
- **告警处理和响应** - 提供告警确认、处理、升级和关闭的完整工作流程
- **告警统计分析** - 分析告警趋势、类型分布和响应时间等关键指标
- **告警规则配置** - 设置告警触发条件、通知方式和处理策略的规则引擎

### 流量分析
- **实时流量监控** - 实时采集和分析网络流量数据，提供秒级监控能力
- **协议分布分析** - 分析各网络协议的流量占比和使用模式，识别异常协议
- **流量来源统计** - 统计和展示流量的地理位置、IP段和设备来源分布
- **异常流量识别** - 基于机器学习算法自动识别和标记可疑的异常流量

### 检测规则
- **自定义检测规则** - 允许用户根据业务需求创建个性化的安全检测规则
- **规则优先级设置** - 配置规则执行顺序和重要性级别，优化检测效率
- **条件逻辑配置** - 支持复杂的逻辑条件组合，实现精准的威胁检测
- **规则测试验证** - 提供规则模拟测试功能，验证规则有效性和准确性

### 设备管理
- **网络设备注册** - 管理网络中的交换机、路由器等设备的基本信息和配置
- **设备状态监控** - 实时监控设备在线状态、性能指标和故障告警信息
- **设备配置管理** - 统一管理设备的网络配置、安全策略和固件版本
- **设备组织架构** - 按照网络拓扑和业务需求组织设备的层级结构关系

### 日志审计
- **操作日志记录** - 详细记录所有用户操作和系统事件，确保操作可追溯
- **用户行为追踪** - 分析用户的登录模式、操作习惯和异常行为检测
- **系统事件审计** - 记录系统级别的配置变更、故障事件和安全事件
- **合规性报告** - 生成符合安全合规要求的审计报告和证据材料

### 系统配置
- **全局参数设置** - 配置系统运行的基础参数、时区、语言和界面主题
- **告警阈值配置** - 设置各类安全事件的告警触发阈值和敏感度参数
- **系统维护模式** - 管理系统的维护窗口、备份策略和更新计划安排
- **性能优化设置** - 调整系统性能参数、缓存策略和资源分配优化配置

## API 接口

### 认证接口
```
POST /api/auth/login     # 用户登录
GET  /api/auth/user      # 获取当前用户信息
GET  /api/logout         # 用户登出
```

### 用户管理
```
GET    /api/users           # 获取用户列表
POST   /api/users           # 创建用户
PUT    /api/users/:id/role  # 更新用户角色
PUT    /api/users/:id/status # 更新用户状态
DELETE /api/users/:id       # 删除用户
```

### 告警管理
```
GET  /api/alerts            # 获取告警列表
GET  /api/alerts/stats      # 获取告警统计
POST /api/alerts/:id/resolve # 处理告警
POST /api/alerts/:id/dismiss # 忽略告警
```

### 更多接口文档请参考 `/docs/api.md`

## 开发指南

### 项目结构
```
├── client/                 # 前端应用
│   ├── src/
│   │   ├── components/     # 通用组件
│   │   ├── pages/         # 页面组件
│   │   ├── hooks/         # React Hooks
│   │   └── lib/           # 工具库
├── server/                # 后端应用
│   ├── routes.ts          # API 路由
│   ├── storage.ts         # 数据访问层
│   ├── db.ts             # 数据库配置
│   └── index.ts          # 服务器入口
├── shared/               # 共享类型定义
│   └── schema.ts         # 数据库模式
└── README.md
```

### 开发命令
```bash
npm run dev          # 启动开发服务器
npm run build        # 构建生产版本
npm run db:push      # 推送数据库模式更改
npm run db:studio    # 打开数据库管理界面
```

### 代码规范
- 使用 TypeScript 进行类型安全开发
- 遵循 ESLint 和 Prettier 配置
- 组件采用函数式编程风格
- API 接口统一使用 RESTful 设计

## 部署说明

### 生产环境部署
1. 构建应用: `npm run build`
2. 配置环境变量
3. 启动服务: `npm start`
4. 配置反向代理 (Nginx/Apache)
5. 设置 SSL 证书

### Docker 部署
```dockerfile
# 可选: 使用 Docker 容器化部署
# 详细配置请参考 docker-compose.yml
```

## 安全考虑

- 所有 API 接口都需要身份验证
- 密码采用 bcrypt 加密存储
- 会话管理使用安全的 cookie 配置
- 输入验证和 SQL 注入防护
- XSS 和 CSRF 攻击防护

## 监控与日志

- 系统操作全程审计记录
- 错误日志自动收集
- 性能指标监控
- 告警事件追踪

## 许可证

本项目采用 MIT 许可证 - 详见 [LICENSE](LICENSE) 文件

## 技术支持

如需技术支持或报告问题，请通过以下方式联系:

- 项目问题: 请在 GitHub Issues 中提交
- 功能建议: 欢迎提交 Pull Request
- 安全问题: 请通过私有渠道报告

## 更新日志

### v2.1.0 (当前版本)
- ✅ 完整的用户管理系统
- ✅ 角色权限控制
- ✅ 实时流量监控
- ✅ 智能告警系统
- ✅ 审计日志功能
- ✅ 响应式界面设计

### 计划功能
- 📋 更高级的异常检测算法
- 📋 自定义报告生成
- 📋 API 密钥管理
- 📋 多租户支持
- 📋 移动端应用

---

**异常流量监控系统 v2.1** - 为企业网络安全保驾护航